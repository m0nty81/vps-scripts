# Задача #

Сделать скрипт базовой настройки VPS для debian и ubuntu.

## Референсная инструкция для Debian 12 ##

1. apt update && apt upgrade -y
2. Создаем пользователя: adduser seysymont
3. Добавляем в группу sudo: usermod -aG sudo seysymont
4. Установить apt install sudo
5. Меняем пользователя: su seysymont
6. Проверяем привилегии: sudo whoami
7. Перейти в папку ~/.ssh
8. Копируем публичный ключ из файла на локальной машине и переименовываем в authorized_keys
9. Открываем конфиг:  sudo nano /etc/ssh/sshd_config
10. Отключаем root: PermitRootLogin no
11. Меняем порт ssh: Port 2245
12. Отключаем вход по паролю: PasswordAuthentication no
13. Включаем вход по сертификату: PubkeyAuthentication yes
14. Перезапустить сервис: sudo service ssh restart
15. Установить firewall: sudo apt install ufw
16. Разрешить порт SSH: sudo ufw allow 2245
17. Включить firewall: sudo ufw enable

## Что надо сделать ##

1. Дать возможность устанавливать ключ как для нового пользователя, так и для существующего пользователя (root)
2. Нового пользователя сделать опциональным. Если новый пользователь создан, то root ssh должен быть отключен.
3. Порт SSH сделать настраиваемым
4. Настроить firewall для нового порта SSH
5. Дать возможность ключ указывать в диалоге скрипта. При выборе ключа должна быть возможность или указать публичный ключ или сгенерировать новые ключи на хосте (приватный ключ после генерации надо дать возможность скачать/копировать)
6. Firewall сделать опциональным
7. Адаптировать скрипт для Debian и Ubuntu
8. Все параметры должны вводиться через диалог. Никаких файлов конфигурации или параметров запуска быть не должно.

## Требования к развертыванию и запуску ##

Скрипт должен запускаться командой на настраиваемом хосте.
Он будет скачиваться curl из интернета и запускаться.

## Тестовые VPS ##

1. Debian 12
    - IP адрес: 144.31.199.219
    - Логин: root
    - Пароль: oL3gQ5lW8s
2. Ubuntu 24.04
    - IP адрес: 144.31.137.38
    - Логин: root
    - Пароль: eC7bM5cA7w

## Публичный репозиторий ##

Я добавил репозиторий для файлов <https://github.com/m0nty81/vps-scripts.git>
Его надо подключить к проекту, но никакие конфиденциальные данные выкладываться туда не должны.
Также, там не должно быть данных для тестирования и требований.
